
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>选择器 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Items.html" />
    
    
    <link rel="prev" href="Spiders.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../1.FIRST STEPS/README.md">
            
                <span>
            
                    
                    粮草先行(FIRST STEPS)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../1.FIRST STEPS/tutorial.html">
            
                <a href="../1.FIRST STEPS/tutorial.html">
            
                    
                    Scrapy指引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../1.FIRST STEPS/examples.html">
            
                <a href="../1.FIRST STEPS/examples.html">
            
                    
                    一些例子
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="README.md">
            
                <span>
            
                    
                    基本概念(BASIC CONCEPTS)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="Command line tool.html">
            
                <a href="Command line tool.html">
            
                    
                    命令行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="Spiders.html">
            
                <a href="Spiders.html">
            
                    
                    蜘蛛
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.3" data-path="Selectors.html">
            
                <a href="Selectors.html">
            
                    
                    选择器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="Items.html">
            
                <a href="Items.html">
            
                    
                    项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="Item Loaders.html">
            
                <a href="Item Loaders.html">
            
                    
                    项目加载器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="Scrapy_shell.html">
            
                <a href="Scrapy_shell.html">
            
                    
                    Scrapy Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="Item Pipeline.html">
            
                <a href="Item Pipeline.html">
            
                    
                    项目管道
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="Feed exports.html">
            
                <a href="Feed exports.html">
            
                    
                    Feed输出
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="Requests and Responses.html">
            
                <a href="Requests and Responses.html">
            
                    
                    请求与响应
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="Link Extractors.html">
            
                <a href="Link Extractors.html">
            
                    
                    链接提取器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="Settings.html">
            
                <a href="Settings.html">
            
                    
                    设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="Exceptions.html">
            
                <a href="Exceptions.html">
            
                    
                    例外
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../3.BULIT-IN SERVICES/README.md">
            
                <span>
            
                    
                    内置服务(BULIT IN SERVICES)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../3.BULIT-IN SERVICES/Logging.html">
            
                <a href="../3.BULIT-IN SERVICES/Logging.html">
            
                    
                    日志记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../3.BULIT-IN SERVICES/Stats Collection.html">
            
                <a href="../3.BULIT-IN SERVICES/Stats Collection.html">
            
                    
                    状态收集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../3.BULIT-IN SERVICES/Sending e-mail.html">
            
                <a href="../3.BULIT-IN SERVICES/Sending e-mail.html">
            
                    
                    发送邮件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../3.BULIT-IN SERVICES/Telnet Console.html">
            
                <a href="../3.BULIT-IN SERVICES/Telnet Console.html">
            
                    
                    第一节
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../3.BULIT-IN SERVICES/Web Service.html">
            
                <a href="../3.BULIT-IN SERVICES/Web Service.html">
            
                    
                    网络服务
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../4.SOLVING SPECIFIC PROBLEMS/README.md">
            
                <span>
            
                    
                    解决特殊问题(SOLVING SPECIFIC PROBLEMS)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../4.SOLVING SPECIFIC PROBLEMS/Frequently Asked Questions.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Frequently Asked Questions.html">
            
                    
                    一些疑问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../4.SOLVING SPECIFIC PROBLEMS/Debugging Spiders.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Debugging Spiders.html">
            
                    
                    调试蜘蛛
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../4.SOLVING SPECIFIC PROBLEMS/Spiders Contracts.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Spiders Contracts.html">
            
                    
                    发送邮件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../4.SOLVING SPECIFIC PROBLEMS/Common Practices.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Common Practices.html">
            
                    
                    常用套路
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../4.SOLVING SPECIFIC PROBLEMS/Broad Crawls.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Broad Crawls.html">
            
                    
                    深度爬取
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../4.SOLVING SPECIFIC PROBLEMS/Using Firefox for scraping.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Using Firefox for scraping.html">
            
                    
                    用火狐浏览器爬取
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../4.SOLVING SPECIFIC PROBLEMS/Using Firebug for scraping.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Using Firebug for scraping.html">
            
                    
                    用Firebug爬取
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../4.SOLVING SPECIFIC PROBLEMS/Debugging memory leaks.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Debugging memory leaks.html">
            
                    
                    调试内存溢出
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../4.SOLVING SPECIFIC PROBLEMS/Downloading and processing files and images.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Downloading and processing files and images.html">
            
                    
                    下载和处理文件和图片
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../4.SOLVING SPECIFIC PROBLEMS/Deploying Spiders.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Deploying Spiders.html">
            
                    
                    部署爬虫
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="../4.SOLVING SPECIFIC PROBLEMS/AutoThrottle extension.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/AutoThrottle extension.html">
            
                    
                    自动Throttle拓展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.12" data-path="../4.SOLVING SPECIFIC PROBLEMS/Benchmarking.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Benchmarking.html">
            
                    
                    Web Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.13" data-path="../4.SOLVING SPECIFIC PROBLEMS/Jobs_pausing and resuming crawls.html">
            
                <a href="../4.SOLVING SPECIFIC PROBLEMS/Jobs_pausing and resuming crawls.html">
            
                    
                    如何暂停与继续爬取
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../5.EXTENDING SCRAPY/README.md">
            
                <span>
            
                    
                    Scrapy拓展用法(EXTENDING SCRAPY)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../5.EXTENDING SCRAPY/Architecture overview.html">
            
                <a href="../5.EXTENDING SCRAPY/Architecture overview.html">
            
                    
                    架构描述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../5.EXTENDING SCRAPY/Downloader Middleware.html">
            
                <a href="../5.EXTENDING SCRAPY/Downloader Middleware.html">
            
                    
                    下载中间件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../5.EXTENDING SCRAPY/Spider Middleware.html">
            
                <a href="../5.EXTENDING SCRAPY/Spider Middleware.html">
            
                    
                    蜘蛛中间件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../5.EXTENDING SCRAPY/Extensions.html">
            
                <a href="../5.EXTENDING SCRAPY/Extensions.html">
            
                    
                    拓展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../5.EXTENDING SCRAPY/Core API.html">
            
                <a href="../5.EXTENDING SCRAPY/Core API.html">
            
                    
                    主要API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../5.EXTENDING SCRAPY/Signals.html">
            
                <a href="../5.EXTENDING SCRAPY/Signals.html">
            
                    
                    信号
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../6.ALL THE REST/README.md">
            
                <span>
            
                    
                    杂项(ALL THE REST)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../6.ALL THE REST/Question.html">
            
                <a href="../6.ALL THE REST/Question.html">
            
                    
                    疑问
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >选择器</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x9009;&#x62E9;&#x5668;">&#x9009;&#x62E9;&#x5668;</h1>
<p>&#x5728;&#x6293;&#x53D6;&#x7F51;&#x9875;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6267;&#x884C;&#x7684;&#x6700;&#x5E38;&#x89C1;&#x4EFB;&#x52A1;&#x662F;&#x4ECE;HTML&#x6E90;&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x3002;&#x6709;&#x51E0;&#x4E2A;&#x5E93;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x70B9;&#xFF1A;</p>
<ul>
<li><code>BeautifulSoup</code>&#x662F;Python&#x7A0B;&#x5E8F;&#x5458;&#x4E2D;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x7684;&#x7F51;&#x9875;&#x6293;&#x53D6;&#x5E93;&#xFF0C;&#x5B83;&#x57FA;&#x4E8E;HTML&#x4EE3;&#x7801;&#x7684;&#x7ED3;&#x6784;&#x6784;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;Python&#x5BF9;&#x8C61;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x5F88;&#x597D;&#x5730;&#x5904;&#x7406;&#x4E86;&#x7CDF;&#x7CD5;&#x7684;&#x6807;&#x8BB0;&#xFF0C;&#x4F46;&#x5B83;&#x6709;&#x4E00;&#x4E2A;&#x7F3A;&#x70B9;&#xFF1A;&#x901F;&#x5EA6;&#x5F88;&#x6162;&#x3002;</li>
<li><code>lxml</code>&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;<code>ElementTree</code>&#x7684;pythonic API&#x7684;XML&#x89E3;&#x6790;&#x5E93;&#xFF08;&#x5B83;&#x4E5F;&#x89E3;&#x6790;HTML&#xFF09;&#x3002;&#xFF08;lxml&#x4E0D;&#x662F;Python&#x6807;&#x51C6;&#x5E93;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;&#xFF09;</li>
</ul>
<p>Scrapy&#x5E26;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x7684;&#x673A;&#x5236;&#x3002;&#x5B83;&#x4EEC;&#x88AB;&#x79F0;&#x4E3A;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x201C;&#x9009;&#x62E9;&#x201D;&#x7531;<code>XPath</code>&#x6216;<code>CSS</code>&#x8868;&#x8FBE;&#x5F0F;&#x6307;&#x5B9A;&#x7684;HTML&#x6587;&#x6863;&#x7684;&#x67D0;&#x4E9B;&#x90E8;&#x5206;&#x3002;</p>
<p><code>XPath</code>&#x662F;&#x4E00;&#x79CD;&#x7528;&#x4E8E;&#x9009;&#x62E9;XML&#x6587;&#x6863;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x5B83;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;HTML&#x3002;<code>CSS</code>&#x662F;&#x4E00;&#x79CD;&#x5C06;&#x6837;&#x5F0F;&#x5E94;&#x7528;&#x4E8E;HTML&#x6587;&#x6863;&#x7684;&#x8BED;&#x8A00;&#x3002;&#x5B83;&#x5B9A;&#x4E49;&#x9009;&#x62E9;&#x5668;&#x5C06;&#x8FD9;&#x4E9B;&#x6837;&#x5F0F;&#x4E0E;&#x7279;&#x5B9A;&#x7684;HTML&#x5143;&#x7D20;&#x76F8;&#x5173;&#x8054;&#x3002;</p>
<p>Scrapy&#x9009;&#x62E9;&#x5668;&#x662F;&#x5728;<code>lxml</code>&#x5E93;&#x4E0A;&#x6784;&#x5EFA;&#x7684;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5B83;&#x4EEC;&#x5728;&#x901F;&#x5EA6;&#x548C;&#x5206;&#x6790;&#x51C6;&#x786E;&#x6027;&#x65B9;&#x9762;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#x3002;</p>
<p>&#x672C;&#x9875;&#x89E3;&#x91CA;&#x4E86;&#x9009;&#x62E9;&#x5668;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x548C;&#x63CF;&#x8FF0;&#x5176;&#x975E;&#x5E38;&#x5C0F;&#x4E14;&#x7B80;&#x5355;&#x7684;API &#xFF0C;&#x4E0D;&#x50CF;&#x66F4;&#x5927;&#x7684;<code>lxml</code> API&#xFF0C;&#x56E0;&#x4E3A;<code>lxml</code>&#x5E93;&#x9664;&#x4E86;&#x9009;&#x62E9;&#x6807;&#x8BB0;&#x6587;&#x6863;&#x4E4B;&#x5916;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8BB8;&#x591A;&#x5176;&#x4ED6;&#x4EFB;&#x52A1;&#x3002;</p>
<p>&#x6709;&#x5173;&#x9009;&#x62E9;&#x5668;API&#x7684;&#x5B8C;&#x6574;&#x53C2;&#x8003;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="">&#x9009;&#x62E9;&#x5668;&#x53C2;&#x8003;</a></p>
<h2 id="&#x9009;&#x62E9;&#x5668;&#x7684;&#x4F7F;&#x7528;">&#x9009;&#x62E9;&#x5668;&#x7684;&#x4F7F;&#x7528;</h2>
<h3 id="&#x6784;&#x5EFA;&#x9009;&#x62E9;&#x5668;">&#x6784;&#x5EFA;&#x9009;&#x62E9;&#x5668;</h3>
<p>Scrapy&#x9009;&#x62E9;&#x5668;&#x662F;<code>Selector</code>&#x901A;&#x8FC7;&#x4F20;&#x9012;&#x6587;&#x672C;&#x6216;<code>TextResponse</code>&#x5BF9;&#x8C61;&#x6784;&#x9020;&#x7684;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x5B83;&#x4F1A;&#x6839;&#x636E;&#x8F93;&#x5165;&#x7C7B;&#x578B;&#x81EA;&#x52A8;&#x9009;&#x62E9;&#x6700;&#x4F73;&#x7684;&#x89E3;&#x6790;&#x89C4;&#x5219;&#xFF08;XML vs HTML&#xFF09;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; from scrapy.selector import Selector
&gt;&gt;&gt; from scrapy.http import HtmlResponse
</code></pre><p>&#x4ECE;&#x6587;&#x672C;&#x6784;&#x5EFA;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; body = &apos;&lt;html&gt;&lt;body&gt;&lt;span&gt;good&lt;/span&gt;&lt;/body&gt;&lt;/html&gt;&apos;
&gt;&gt;&gt;&gt; Selector(text=body).xpath(&apos;//span/text()&apos;).extract()
[u&apos;good&apos;]
</code></pre><p>&#x4ECE;&#x54CD;&#x5E94;&#x6784;&#x5EFA;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response = HtmlResponse(url=&apos;http://example.com&apos;, body=body)
&gt;&gt;&gt;&gt; Selector(response=response).xpath(&apos;//span/text()&apos;).extract()
[u&apos;good&apos;]
</code></pre><p>&#x4E3A;&#x65B9;&#x4FBF;&#x8D77;&#x89C1;&#xFF0C;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#x5728;.selector&#x5C5E;&#x6027;&#x4E0A;&#x516C;&#x5F00;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x5728;&#x53EF;&#x80FD;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x5FEB;&#x6377;&#x65B9;&#x5F0F;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.selector.xpath(&apos;//span/text()&apos;).extract()
[u&apos;good&apos;]
</code></pre><h3 id="&#x4F7F;&#x7528;&#x9009;&#x62E9;&#x5668;">&#x4F7F;&#x7528;&#x9009;&#x62E9;&#x5668;</h3>
<p>&#x4E3A;&#x4E86;&#x89E3;&#x91CA;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;Scrapy shell&#xFF08;&#x63D0;&#x4F9B;&#x4EA4;&#x4E92;&#x5F0F;&#x6D4B;&#x8BD5;&#xFF09;&#x4EE5;&#x53CA;&#x4F4D;&#x4E8E;Scrapy&#x6587;&#x6863;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x7684;&#x793A;&#x4F8B;&#x9875;&#x9762;&#xFF1A;
<a href="https://doc.scrapy.org/en/latest/_static/selectors-sample1.html" target="_blank">https://doc.scrapy.org/en/latest/_static/selectors-sample1.html</a></p>
<p>&#x8FD9;&#x91CC;&#x662F;&#x5B83;&#x7684;HTML&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code>&lt;html&gt;
 &lt;head&gt;
  &lt;base href=&apos;http://example.com/&apos; /&gt;
  &lt;title&gt;Example website&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;div id=&apos;images&apos;&gt;
   &lt;a href=&apos;image1.html&apos;&gt;Name: My image 1 &lt;br /&gt;&lt;img src=&apos;image1_thumb.jpg&apos; /&gt;&lt;/a&gt;
   &lt;a href=&apos;image2.html&apos;&gt;Name: My image 2 &lt;br /&gt;&lt;img src=&apos;image2_thumb.jpg&apos; /&gt;&lt;/a&gt;
   &lt;a href=&apos;image3.html&apos;&gt;Name: My image 3 &lt;br /&gt;&lt;img src=&apos;image3_thumb.jpg&apos; /&gt;&lt;/a&gt;
   &lt;a href=&apos;image4.html&apos;&gt;Name: My image 4 &lt;br /&gt;&lt;img src=&apos;image4_thumb.jpg&apos; /&gt;&lt;/a&gt;
   &lt;a href=&apos;image5.html&apos;&gt;Name: My image 5 &lt;br /&gt;&lt;img src=&apos;image5_thumb.jpg&apos; /&gt;&lt;/a&gt;
  &lt;/div&gt;
 &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x6253;&#x5F00;shell&#xFF1A;</p>
<p><code>scrapy shell https://doc.scrapy.org/zh/latest/_static/selectors-sample1.html</code></p>
<p>&#x7136;&#x540E;&#xFF0C;&#x5728;&#x52A0;&#x8F7D;shell&#x4E4B;&#x540E;&#xFF0C;&#x60A8;&#x5C06;&#x6709;&#x53EF;&#x7528;&#x7684;&#x54CD;&#x5E94;&#x4F5C;&#x4E3A;<code>response</code> shell&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x9644;&#x52A0;&#x7684;&#x9009;&#x62E9;&#x5668;&#x4F5C;&#x4E3A;<code>response.selector</code>&#x5C5E;&#x6027;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x5904;&#x7406;HTML&#xFF0C;&#x9009;&#x62E9;&#x5668;&#x5C06;&#x81EA;&#x52A8;&#x4F7F;&#x7528;HTML&#x89E3;&#x6790;&#x5668;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x901A;&#x8FC7;&#x67E5;&#x770B;&#x8BE5;&#x9875;&#x9762;&#x7684;HTML&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x9009;&#x62E9;&#x6807;&#x9898;&#x6807;&#x7B7E;&#x5185;&#x7684;&#x6587;&#x672C;&#x7684;XPath&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.selector.xpath(&apos;//title/text()&apos;)
[&lt;Selector (text) xpath=//title/text()&gt;]
</code></pre><p>&#x4F7F;&#x7528;XPath&#x548C;CSS&#x67E5;&#x8BE2;&#x54CD;&#x5E94;&#x975E;&#x5E38;&#x5E38;&#x89C1;&#xFF0C;&#x4EE5;&#x81F3;&#x4E8E;&#x54CD;&#x5E94;&#x5305;&#x542B;&#x4E24;&#x4E2A;&#x4FBF;&#x6377;&#x5FEB;&#x6377;&#x952E;&#xFF1A;<code>response.xpath()</code>&#x548C;<code>response.css()</code>&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//title/text()&apos;)
[&lt;Selector (text) xpath=//title/text()&gt;]
&gt;&gt;&gt; response.css(&apos;title::text&apos;)
[&lt;Selector (text) xpath=//title/text()&gt;]
</code></pre><p>&#x6B63;&#x5982;&#x4F60;&#x6240;&#x770B;&#x5230;&#x7684;&#xFF0C;<code>.xpath()</code>&#x548C;<code>.css()</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>SelectorList</code>&#x5B9E;&#x4F8B;&#xFF0C;&#x8FD9;&#x662F;&#x65B0;&#x7684;&#x9009;&#x62E9;&#x5217;&#x8868;&#x3002;&#x8BE5;API&#x53EF;&#x7528;&#x4E8E;&#x5FEB;&#x901F;&#x9009;&#x62E9;&#x5D4C;&#x5957;&#x6570;&#x636E;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.css(&apos;img&apos;).xpath(&apos;@src&apos;).extract()
[u&apos;image1_thumb.jpg&apos;, u&apos;image2_thumb.jpg&apos;, u&apos;image3_thumb.jpg&apos;, u&apos;image4_thumb.jpg&apos;, u&apos;image5_thumb.jpg&apos;]
</code></pre><p>&#x8981;&#x5B9E;&#x9645;&#x63D0;&#x53D6;&#x6587;&#x672C;&#x6570;&#x636E;&#xFF0C;&#x60A8;&#x5FC5;&#x987B;&#x8C03;&#x7528;&#x9009;&#x62E9;&#x5668;<code>.extract()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//title/text()&apos;).extract()
[u&apos;Example website&apos;]
</code></pre><p>&#x5982;&#x679C;&#x4F60;&#x53EA;&#x60F3;&#x63D0;&#x53D6;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x9009;&#x62E9;&#x5668;<code>.extract_first()</code></p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//div[@id=&quot;images&quot;]/a/text()&apos;).extract_first()
u&apos;Name: My image 1 &apos;
</code></pre><p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x5143;&#x7D20;&#xFF0C;&#x5B83;&#x4F1A;&#x8FD4;&#x56DE;None&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//div[@id=&quot;not-exists&quot;]/text()&apos;).extract_first() is NoneTrue
</code></pre><p>&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x503C;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x63D0;&#x4F9B;&#xFF0C;&#x7528;&#x6765;&#x4EE3;&#x66FF;None&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//div[@id=&quot;not-exists&quot;]/text()&apos;).extract_first(default=&apos;not-found&apos;)
&apos;not-found&apos;
</code></pre><p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;CSS&#x9009;&#x62E9;&#x5668;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;CSS3&#x4F2A;&#x5143;&#x7D20;&#x9009;&#x62E9;&#x6587;&#x672C;&#x6216;&#x5C5E;&#x6027;&#x8282;&#x70B9;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.css(&apos;title::text&apos;).extract()
[u&apos;Example website&apos;]
</code></pre><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x8981;&#x83B7;&#x53D6;&#x57FA;&#x672C;URL&#x548C;&#x4E00;&#x4E9B;&#x56FE;&#x50CF;&#x94FE;&#x63A5;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//base/@href&apos;).extract()
[u&apos;http://example.com/&apos;]
&gt;&gt;&gt; response.css(&apos;base::attr(href)&apos;).extract()
[u&apos;http://example.com/&apos;]
&gt;&gt;&gt; response.xpath(&apos;//a[contains(@href, &quot;image&quot;)]/@href&apos;).extract()
[u&apos;image1.html&apos;, u&apos;image2.html&apos;, u&apos;image3.html&apos;, u&apos;image4.html&apos;, u&apos;image5.html&apos;]
&gt;&gt;&gt; response.css(&apos;a[href*=image]::attr(href)&apos;).extract()
[u&apos;image1.html&apos;, u&apos;image2.html&apos;, u&apos;image3.html&apos;, u&apos;image4.html&apos;, u&apos;image5.html&apos;]
&gt;&gt;&gt; response.xpath(&apos;//a[contains(@href, &quot;image&quot;)]/img/@src&apos;).extract()
[u&apos;image1_thumb.jpg&apos;, u&apos;image2_thumb.jpg&apos;, u&apos;image3_thumb.jpg&apos;, u&apos;image4_thumb.jpg&apos;, u&apos;image5_thumb.jpg&apos;]
&gt;&gt;&gt; response.css(&apos;a[href*=image] img::attr(src)&apos;).extract()
[u&apos;image1_thumb.jpg&apos;, u&apos;image2_thumb.jpg&apos;, u&apos;image3_thumb.jpg&apos;, u&apos;image4_thumb.jpg&apos;, u&apos;image5_thumb.jpg&apos;]
</code></pre><h3 id="&#x5D4C;&#x5957;&#x9009;&#x62E9;&#x5668;">&#x5D4C;&#x5957;&#x9009;&#x62E9;&#x5668;</h3>
<p>&#x9009;&#x62E9;&#x65B9;&#x6CD5;&#xFF08;<code>.xpath()</code>&#x6216;<code>.css()</code>&#xFF09;&#x8FD4;&#x56DE;&#x76F8;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x9009;&#x62E9;&#x5668;&#x5217;&#x8868;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x4E5F;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x8FD9;&#x4E9B;&#x9009;&#x62E9;&#x5668;&#x7684;&#x9009;&#x62E9;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; links = response.xpath(&apos;//a[contains(@href, &quot;image&quot;)]&apos;)&gt;&gt;&gt; links.extract()
[u&apos;&lt;a href=&quot;image1.html&quot;&gt;Name: My image 1 &lt;br&gt;&lt;img src=&quot;image1_thumb.jpg&quot;&gt;&lt;/a&gt;&apos;, 
u&apos;&lt;a href=&quot;image2.html&quot;&gt;Name: My image 2 &lt;br&gt;&lt;img src=&quot;image2_thumb.jpg&quot;&gt;&lt;/a&gt;&apos;, 
u&apos;&lt;a href=&quot;image3.html&quot;&gt;Name: My image 3 &lt;br&gt;&lt;img src=&quot;image3_thumb.jpg&quot;&gt;&lt;/a&gt;&apos;, 
u&apos;&lt;a href=&quot;image4.html&quot;&gt;Name: My image 4 &lt;br&gt;&lt;img src=&quot;image4_thumb.jpg&quot;&gt;&lt;/a&gt;&apos;, 
u&apos;&lt;a href=&quot;image5.html&quot;&gt;Name: My image 5 &lt;br&gt;&lt;img src=&quot;image5_thumb.jpg&quot;&gt;&lt;/a&gt;&apos;]
&gt;&gt;&gt; for index, link in enumerate(links):
...     args = (index, link.xpath(&apos;@href&apos;).extract(), link.xpath(&apos;img/@src&apos;).extract())
...     print &apos;Link number %d points to url %s and image %s&apos; % args
Link number 0 points to url [u&apos;image1.html&apos;] and image [u&apos;image1_thumb.jpg&apos;]
Link number 1 points to url [u&apos;image2.html&apos;] and image [u&apos;image2_thumb.jpg&apos;]
Link number 2 points to url [u&apos;image3.html&apos;] and image [u&apos;image3_thumb.jpg&apos;]
Link number 3 points to url [u&apos;image4.html&apos;] and image [u&apos;image4_thumb.jpg&apos;]
Link number 4 points to url [u&apos;image5.html&apos;] and image [u&apos;image5_thumb.jpg&apos;]
</code></pre><h3 id="&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x9009;&#x62E9;&#x5668;">&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x9009;&#x62E9;&#x5668;</h3>
<p><code>Selector</code>&#x4E5F;&#x6709;<code>.re()</code>&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x4E0E;&#x4F7F;&#x7528;<code>.xpath()</code>&#x6216;<code>.css()</code>&#x65B9;&#x6CD5;&#x4E0D;&#x540C;&#xFF0C;<code>.re()</code>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;unicode&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#x3002;&#x6240;&#x4EE5;&#x4F60;&#x4E0D;&#x80FD;&#x6784;&#x5EFA;&#x5D4C;&#x5957;<code>.re()</code>&#x8C03;&#x7528;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x4ECE;&#x4E0A;&#x9762;&#x7684;HTML&#x4EE3;&#x7801;&#x4E2D;&#x63D0;&#x53D6;&#x56FE;&#x50CF;&#x540D;&#x79F0;&#x7684;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//a[contains(@href, &quot;image&quot;)]/text()&apos;).re(r&apos;Name:\s*(.*)&apos;)
[u&apos;My image 1&apos;, u&apos;My image 2&apos;, u&apos;My image 3&apos;, u&apos;My image 4&apos;, u&apos;My image 5&apos;]
</code></pre><h3 id="&#x4F7F;&#x7528;&#x76F8;&#x5BF9;&#x7684;xpath">&#x4F7F;&#x7528;&#x76F8;&#x5BF9;&#x7684;XPath</h3>
<p>&#x8BF7;&#x8BB0;&#x4F4F;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x5D4C;&#x5957;&#x9009;&#x62E9;&#x5668;&#x5E76;&#x4F7F;&#x7528;&#x4EE5;XPath&#x5F00;&#x5934;&#x7684;XPath <code>/</code>&#xFF0C;&#x90A3;&#x4E48;XPath&#x5BF9;&#x4E8E;&#x6587;&#x6863;&#x800C;&#x8A00;&#x662F;&#x7EDD;&#x5BF9;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F8;&#x5BF9;&#x4E8E; Selector&#x60A8;&#x4ECE;&#x4E2D;&#x8C03;&#x7528;&#x5B83;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5047;&#x8BBE;&#x4F60;&#x60F3;&#x63D0;&#x53D6;<code>&lt;p&gt;</code>&#x5143;&#x7D20;&#x5185;&#x7684;&#x6240;&#x6709;<code>&lt;div&gt;</code> &#x5143;&#x7D20;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x4F60;&#x4F1A;&#x5F97;&#x5230;&#x6240;&#x6709;<code>&lt;div&gt;</code>&#x5143;&#x7D20;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; divs = response.xpath(&apos;//div&apos;)
</code></pre><p>&#x8D77;&#x521D;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x662F;&#x9519;&#x8BEF;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5B9E;&#x9645;&#x4E0A;&#x4F1A;<code>&lt;p&gt;</code>&#x4ECE;&#x6587;&#x6863;&#x4E2D;&#x63D0;&#x53D6;&#x6240;&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;<code>&lt;div&gt;</code>&#x5143;&#x7D20;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; for p in divs.xpath(&apos;//p&apos;):  # this is wrong - gets all &lt;p&gt; from the whole document
...     print p.extract()
</code></pre><p>&#x8FD9;&#x662F;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#x7684;&#x6B63;&#x786E;&#x65B9;&#x6CD5;&#xFF08;&#x6CE8;&#x610F;&#x524D;&#x7F00;&#x7684;&#x70B9;&#xFF1A;<code>.//p</code>XPath &#xFF09;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; for  p  in  divs &#x3002;xpath &#xFF08;&apos;.//p&apos; &#xFF09;&#xFF1A;  &#xFF03;&#x63D0;&#x53D6;&#x6240;&#x6709;&lt;p&gt;&#x5185;&#x90E8;
...     print  p &#x3002;&#x63D0;&#x53D6;&#x7269;&#xFF08;&#xFF09;
</code></pre><p>&#x53E6;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x60C5;&#x51B5;&#x662F;&#x63D0;&#x53D6;&#x6240;&#x6709;<code>&lt;p&gt;</code>&#x7684;&#x5B50;&#x8282;&#x70B9;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; for p in divs.xpath(&apos;.//p&apos;):  # extracts all &lt;p&gt; inside
...     print p.extract()
</code></pre><p>&#x6709;&#x5173;&#x76F8;&#x5173;XPath&#x7684;&#x66F4;&#x591A;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;XPath&#x89C4;&#x8303;&#x4E2D;&#x7684;<a href="">&#x4F4D;&#x7F6E;&#x8DEF;&#x5F84;</a>&#x90E8;&#x5206;&#x3002;</p>
<h3 id="xpath&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x7684;&#x53D8;&#x91CF;">XPath&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x7684;&#x53D8;&#x91CF;</h3>
<p>XPath&#x5141;&#x8BB8;&#x4F7F;&#x7528;<code>$somevariable</code>&#x8BED;&#x6CD5;&#x5728;XPath&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x5F15;&#x7528;&#x53D8;&#x91CF;&#x3002;&#x8FD9;&#x4E0E;SQL&#x4E16;&#x754C;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x5316;&#x67E5;&#x8BE2;&#x6216;&#x9884;&#x51C6;&#x5907;&#x8BED;&#x53E5;&#x6709;&#x4E9B;&#x7C7B;&#x4F3C;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5360;&#x4F4D;&#x7B26;&#x66FF;&#x6362;&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x67D0;&#x4E9B;&#x53C2;&#x6570;&#xFF0C;<code>?</code>&#x7136;&#x540E;&#x7528;&#x5360;&#x4F4D;&#x7B26;&#x4F20;&#x9012;&#x7684;&#x503C;&#x66FF;&#x6362;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5176;&#x201C;id&#x201D;&#x5C5E;&#x6027;&#x503C;&#x5339;&#x914D;&#x5143;&#x7D20;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x4E0D;&#x7528;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x786C;&#x7F16;&#x7801;&#xFF08;&#x4EE5;&#x524D;&#x663E;&#x793A;&#x8FC7;&#xFF09;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; # `$val` used in the expression, a `val` argument needs to be passed&gt;&gt;&gt; response.xpath(&apos;//div[@id=$val]/a/text()&apos;, val=&apos;images&apos;).extract_first()
u&apos;Name: My image 1 &apos;
</code></pre><p>&#x4E0B;&#x9762;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x4E3A;&#x4E86;&#x627E;&#x5230;<code>&lt;div&gt;</code>&#x5305;&#x542B;&#x4E94;&#x4E2A;<code>&lt;a&gt;</code>&#x5B50;&#x7684;&#x6807;&#x7B7E;&#x7684;&#x201C;id&#x201D;&#x5C5E;&#x6027;&#xFF08;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5C06;&#x8BE5;&#x503C;<code>5</code>&#x4F5C;&#x4E3A;&#x6574;&#x6570;&#x4F20;&#x9012;&#xFF09;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&apos;//div[count(a)=$cnt]/@id&apos;, cnt=5).extract_first()
u&apos;images&apos;
</code></pre><p>&#x5728;&#x5F15;&#x7528;<code>.xpath()</code> &#x65F6;&#xFF0C;&#x6240;&#x6709;&#x53D8;&#x91CF;&#x8C03;&#x7528;&#x65F6;&#x90FD;&#x5FC5;&#x987B;&#x6709;&#x4E00;&#x4E2A;&#x7ED1;&#x5B9A;&#x503C;&#xFF08;&#x5426;&#x5219;&#x4F60;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;<code>ValueError: XPath error:</code>&#x5F02;&#x5E38;&#xFF09;&#x3002;&#x8FD9;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x4F20;&#x9012;&#x8BB8;&#x591A;&#x547D;&#x540D;&#x53C2;&#x6570;&#x6765;&#x5B8C;&#x6210;&#x3002;
<code>parsel</code>&#xFF0C;&#x4E3A;Scrapy&#x9009;&#x62E9;&#x5668;&#x63D0;&#x4F9B;&#x52A8;&#x529B;&#x7684;&#x5E93;&#xFF0C;&#x6709;&#x66F4;&#x591A;&#x5173;&#x4E8E;XPath&#x53D8;&#x91CF;&#x7684;&#x7EC6;&#x8282;&#x548C;&#x4F8B;&#x5B50;&#x3002;</p>
<h2 id="&#x4F7F;&#x7528;exslt&#x6269;&#x5C55;">&#x4F7F;&#x7528;EXSLT&#x6269;&#x5C55;</h2>
<p>&#x6784;&#x5EFA;&#x5728;<code>lxml</code>&#x4E4B;&#x4E0A;&#xFF0C;Scrapy&#x9009;&#x62E9;&#x5668;&#x8FD8;&#x652F;&#x6301;&#x4E00;&#x4E9B;<code>EXSLT</code>&#x6269;&#x5C55;&#xFF0C;&#x5E76;&#x9644;&#x5E26;&#x8FD9;&#x4E9B;&#x9884;&#x5148;&#x6CE8;&#x518C;&#x7684;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x4EE5;&#x7528;&#x4E8E;XPath&#x8868;&#x8FBE;&#x5F0F;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x524D;&#x7F00;</th>
<th style="text-align:left">&#x547D;&#x540D;&#x7A7A;&#x95F4;</th>
<th style="text-align:center">&#x7528;&#x6CD5;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">re</td>
<td style="text-align:left"><a href="http://exslt.org/regular-expressions" target="_blank">http://exslt.org/regular-expressions</a></td>
<td style="text-align:center">regular expressions</td>
</tr>
<tr>
<td style="text-align:left">set</td>
<td style="text-align:left"><a href="http://exslt.org/sets" target="_blank">http://exslt.org/sets</a></td>
<td style="text-align:center">set manipulation</td>
</tr>
</tbody>
</table>
<h3 id="&#x5E38;&#x7528;&#x8868;&#x8FBE;">&#x5E38;&#x7528;&#x8868;&#x8FBE;</h3>
<p><code>test()</code>&#x65B9;&#x6CD5;&#xFF1A;&#x4F8B;&#x5982;&#xFF0C;&#x5F53;XPath <code>starts-with()</code>&#x6216;&#x8005;<code>contains()</code>&#x4E0D;&#x591F;&#x7528;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684; &#x3002;
&#x4F7F;&#x7528;&#x4EE5;&#x6570;&#x5B57;&#x7ED3;&#x5C3E;&#x7684;&#x201C;class&#x201D;&#x5C5E;&#x6027;&#x9009;&#x62E9;&#x5217;&#x8868;&#x9879;&#x4E2D;&#x94FE;&#x63A5;&#x7684;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; from scrapy import Selector&gt;&gt;&gt; doc = &quot;&quot;&quot;
... &lt;div&gt;
...     &lt;ul&gt;
...         &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link1.html&quot;&gt;first item&lt;/a&gt;&lt;/li&gt;
...         &lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;
...         &lt;li class=&quot;item-inactive&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;third item&lt;/a&gt;&lt;/li&gt;
...         &lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;
...         &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;
...     &lt;/ul&gt;
... &lt;/div&gt;
... &quot;&quot;&quot;
&gt;&gt;&gt; sel = Selector(text=doc, type=&quot;html&quot;)
&gt;&gt;&gt; sel.xpath(&apos;//li//@href&apos;).extract()[u&apos;link1.html&apos;, u&apos;link2.html&apos;, u&apos;link3.html&apos;, u&apos;link4.html&apos;, u&apos;link5.html&apos;]
&gt;&gt;&gt; sel.xpath(&apos;//li[re:test(@class, &quot;item-\d$&quot;)]//@href&apos;).extract()[u&apos;link1.html&apos;, u&apos;link2.html&apos;, u&apos;link4.html&apos;, u&apos;link5.html&apos;]
&gt;&gt;&gt;
</code></pre><blockquote>
<p>&#x8B66;&#x544A;
C&#x5E93;libxslt&#x672C;&#x8EAB;&#x4E0D;&#x652F;&#x6301;EXSLT&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;lxml&#x7684;&#x5B9E;&#x73B0;&#x5728;Python re&#x6A21;&#x5757;&#x4E2D;&#x4F7F;&#x7528;&#x94A9;&#x5B50;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5728;XPath&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x51FD;&#x6570;&#x53EF;&#x80FD;&#x4F1A;&#x589E;&#x52A0;&#x4E00;&#x70B9;&#x6027;&#x80FD;&#x635F;&#x5931;&#x3002;</p>
<h3 id="&#x8BBE;&#x7F6E;&#x64CD;&#x4F5C;">&#x8BBE;&#x7F6E;&#x64CD;&#x4F5C;</h3>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5728;&#x63D0;&#x53D6;&#x6587;&#x672C;&#x5143;&#x7D20;&#x4E4B;&#x524D;&#xFF0C;&#x8FD9;&#x4E9B;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x6392;&#x9664;&#x6587;&#x6863;&#x6811;&#x7684;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x3002;</p>
</blockquote>
<p>&#x4F7F;&#x7528;itemscopes&#x7EC4;&#x548C;&#x76F8;&#x5E94;&#x7684;itemprops &#x63D0;&#x53D6;&#x5FAE;&#x6570;&#x636E;&#xFF08;&#x4ECE;<code>http://schema.org/Product</code>&#x83B7;&#x53D6;&#x6837;&#x672C;&#x5185;&#x5BB9;&#xFF09;&#x7684;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; doc = &quot;&quot;&quot;
... &lt;div itemscope itemtype=&quot;http://schema.org/Product&quot;&gt;
...   &lt;span itemprop=&quot;name&quot;&gt;Kenmore White 17&quot; Microwave&lt;/span&gt;
...   &lt;img src=&quot;kenmore-microwave-17in.jpg&quot; alt=&apos;Kenmore 17&quot; Microwave&apos; /&gt;
...   &lt;div itemprop=&quot;aggregateRating&quot;
...     itemscope itemtype=&quot;http://schema.org/AggregateRating&quot;&gt;
...    Rated &lt;span itemprop=&quot;ratingValue&quot;&gt;3.5&lt;/span&gt;/5
...    based on &lt;span itemprop=&quot;reviewCount&quot;&gt;11&lt;/span&gt; customer reviews
...   &lt;/div&gt;
...
...   &lt;div itemprop=&quot;offers&quot; itemscope itemtype=&quot;http://schema.org/Offer&quot;&gt;
...     &lt;span itemprop=&quot;price&quot;&gt;$55.00&lt;/span&gt;
...     &lt;link itemprop=&quot;availability&quot; href=&quot;http://schema.org/InStock&quot; /&gt;In stock
...   &lt;/div&gt;
...
...   Product description:
...   &lt;span itemprop=&quot;description&quot;&gt;0.7 cubic feet countertop microwave.
...   Has six preset cooking categories and convenience features like
...   Add-A-Minute and Child Lock.&lt;/span&gt;
...
...   Customer reviews:
...
...   &lt;div itemprop=&quot;review&quot; itemscope itemtype=&quot;http://schema.org/Review&quot;&gt;
...     &lt;span itemprop=&quot;name&quot;&gt;Not a happy camper&lt;/span&gt; -
...     by &lt;span itemprop=&quot;author&quot;&gt;Ellie&lt;/span&gt;,
...     &lt;meta itemprop=&quot;datePublished&quot; content=&quot;2011-04-01&quot;&gt;April 1, 2011
...     &lt;div itemprop=&quot;reviewRating&quot; itemscope itemtype=&quot;http://schema.org/Rating&quot;&gt;
...       &lt;meta itemprop=&quot;worstRating&quot; content = &quot;1&quot;&gt;
...       &lt;span itemprop=&quot;ratingValue&quot;&gt;1&lt;/span&gt;/
...       &lt;span itemprop=&quot;bestRating&quot;&gt;5&lt;/span&gt;stars
...     &lt;/div&gt;
...     &lt;span itemprop=&quot;description&quot;&gt;The lamp burned out and now I have to replace
...     it. &lt;/span&gt;
...   &lt;/div&gt;
...
...   &lt;div itemprop=&quot;review&quot; itemscope itemtype=&quot;http://schema.org/Review&quot;&gt;
...     &lt;span itemprop=&quot;name&quot;&gt;Value purchase&lt;/span&gt; -
...     by &lt;span itemprop=&quot;author&quot;&gt;Lucas&lt;/span&gt;,
...     &lt;meta itemprop=&quot;datePublished&quot; content=&quot;2011-03-25&quot;&gt;March 25, 2011
...     &lt;div itemprop=&quot;reviewRating&quot; itemscope itemtype=&quot;http://schema.org/Rating&quot;&gt;
...       &lt;meta itemprop=&quot;worstRating&quot; content = &quot;1&quot;/&gt;
...       &lt;span itemprop=&quot;ratingValue&quot;&gt;4&lt;/span&gt;/
...       &lt;span itemprop=&quot;bestRating&quot;&gt;5&lt;/span&gt;stars
...     &lt;/div&gt;
...     &lt;span itemprop=&quot;description&quot;&gt;Great microwave for the price. It is small and
...     fits in my apartment.&lt;/span&gt;
...   &lt;/div&gt;
...   
...
... &lt;/div&gt;
... &quot;&quot;&quot;
&gt;&gt;&gt; sel = Selector(text=doc, type=&quot;html&quot;)&gt;&gt;&gt; for scope in sel.xpath(&apos;//div[@itemscope]&apos;):
...     print &quot;current scope:&quot;, scope.xpath(&apos;@itemtype&apos;).extract()
...     props = scope.xpath(&apos;&apos;&apos;
...                 set:difference(./descendant::*/@itemprop,...                                .//*[@itemscope]/*/@itemprop)&apos;&apos;&apos;)
...     print &quot;    properties:&quot;, props.extract()
...     print
current scope: [u&apos;http://schema.org/Product&apos;]    properties: [u&apos;name&apos;, u&apos;aggregateRating&apos;, u&apos;offers&apos;, u&apos;description&apos;, u&apos;review&apos;, u&apos;review&apos;]
current scope: [u&apos;http://schema.org/AggregateRating&apos;]    properties: [u&apos;ratingValue&apos;, u&apos;reviewCount&apos;]
current scope: [u&apos;http://schema.org/Offer&apos;]    properties: [u&apos;price&apos;, u&apos;availability&apos;]
current scope: [u&apos;http://schema.org/Review&apos;]    properties: [u&apos;name&apos;, u&apos;author&apos;, u&apos;datePublished&apos;, u&apos;reviewRating&apos;, u&apos;description&apos;]
current scope: [u&apos;http://schema.org/Rating&apos;]    properties: [u&apos;worstRating&apos;, u&apos;ratingValue&apos;, u&apos;bestRating&apos;]
current scope: [u&apos;http://schema.org/Review&apos;]    properties: [u&apos;name&apos;, u&apos;author&apos;, u&apos;datePublished&apos;, u&apos;reviewRating&apos;, u&apos;description&apos;]
current scope: [u&apos;http://schema.org/Rating&apos;]    properties: [u&apos;worstRating&apos;, u&apos;ratingValue&apos;, u&apos;bestRating&apos;]
&gt;&gt;&gt;
</code></pre><p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8FED;&#x4EE3;<code>itemscope</code>&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x4E3A;&#x6BCF;&#x4E2A;<code>itemprops</code>&#x5143;&#x7D20;&#x5BFB;&#x627E;&#x6240;&#x6709;&#x5143;&#x7D20;&#x5E76;&#x6392;&#x9664;&#x90A3;&#x4E9B;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E2D;&#x7684;&#x5143;&#x7D20;<code>itemscope</code>&#x3002;</p>
<h2 id="&#x4E00;&#x4E9B;xpath&#x6280;&#x5DE7;">&#x4E00;&#x4E9B;XPath&#x6280;&#x5DE7;</h2>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E9B;&#x6280;&#x5DE7;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#x5728;&#x4F7F;&#x7528;Scrapy&#x9009;&#x62E9;&#x5668;&#x7684;XPath&#x65F6;&#x6709;&#x7528;&#xFF0C;&#x57FA;&#x4E8E;<code>ScrapingHub&#x535A;&#x5BA2;&#x7684;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;</code>&#x3002;&#x5982;&#x679C;&#x60A8;&#x8FD8;&#x4E0D;&#x592A;&#x719F;&#x6089;XPath&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5148;&#x770B;&#x770B;&#x8FD9;&#x4E2A;<code>XPath</code>&#x6559;&#x7A0B;&#x3002;</p>
<h3 id="&#x5728;&#x6761;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x6587;&#x672C;&#x8282;&#x70B9;">&#x5728;&#x6761;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x6587;&#x672C;&#x8282;&#x70B9;</h3>
<p>&#x5F53;&#x60A8;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6587;&#x672C;&#x5185;&#x5BB9;&#x4F5C;&#x4E3A;<code>XPath&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;</code>&#x65F6;&#xFF0C;&#x8BF7;&#x907F;&#x514D;&#x4F7F;&#x7528;<code>.//text()</code>&#x548C;&#x4F7F;&#x7528;<code>.</code>&#x3002;
&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x8868;&#x8FBE;&#x5F0F;<code>.//text()</code>&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x7EC4;&#x6587;&#x672C;&#x5143;&#x7D20; - &#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x96C6;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x96C6;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x5F53;&#x5B83;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;&#x5982;<code>contains()</code>or <code>starts-with()</code>&#x65F6;&#xFF0C;&#x4F1A;&#x4EA7;&#x751F;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x6587;&#x672C;&#x3002;</p>
<p>&#x4F8B;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; from scrapy import Selector
&gt;&gt;&gt; sel = Selector(text=&apos;&lt;a href=&quot;#&quot;&gt;Click here to go to the &lt;strong&gt;Next Page&lt;/strong&gt;&lt;/a&gt;&apos;)
</code></pre><p>&#x5C06;&#x8282;&#x70B9;&#x96C6;&#x8F6C;&#x6362;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; sel.xpath(&apos;//a//text()&apos;).extract() # take a peek at the node-set[u&apos;Click here to go to the &apos;, u&apos;Next Page&apos;]
&gt;&gt;&gt; sel.xpath(&quot;string(//a[1]//text())&quot;).extract() # convert it to string[u&apos;Click here to go to the &apos;]
</code></pre><p>&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x8F6C;&#x6362;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#x4F1A;&#x5C06;&#x5176;&#x672C;&#x8EAB;&#x53CA;&#x5176;&#x540E;&#x4EE3;&#x7684;&#x6587;&#x672C;&#x62FC;&#x63A5;&#x5728;&#x4E00;&#x8D77;:</p>
<pre><code>&gt;&gt;&gt; sel.xpath(&quot;//a[1]&quot;).extract() # select the first node
[u&apos;&lt;a href=&quot;#&quot;&gt;Click here to go to the &lt;strong&gt;Next Page&lt;/strong&gt;&lt;/a&gt;&apos;]
&gt;&gt;&gt; sel.xpath(&quot;string(//a[1])&quot;).extract() # convert it to string
[u&apos;Click here to go to the Next Page&apos;]
</code></pre><p>&#x56E0;&#x6B64;&#xFF0C;<code>.//text()</code>&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x8282;&#x70B9;&#x96C6;&#x5C06;&#x4E0D;&#x4F1A;&#x9009;&#x62E9;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; sel.xpath(&quot;//a[contains(.//text(), &apos;Next Page&apos;)]&quot;).extract()
[]
</code></pre><p>&#x4F46;&#x4F7F;&#x7528;<code>.</code>&#x610F;&#x5473;&#x7740;&#x8282;&#x70B9;&#xFF0C;&#x5DE5;&#x4F5C;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; sel.xpath(&quot;//a[contains(., &apos;Next Page&apos;)]&quot;).extract()[u&apos;&lt;a href=&quot;#&quot;&gt;Click here to go to the &lt;strong&gt;Next Page&lt;/strong&gt;&lt;/a&gt;&apos;]
</code></pre><h3 id="&#x5F53;&#x5FC3;-node1-and-node1&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;">&#x5F53;&#x5FC3; //node[1] and (//node)[1]&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;</h3>
<p><code>//node[1]</code> &#x9009;&#x62E9;&#x5728;&#x5176;&#x5404;&#x81EA;&#x7236;&#x6BCD;&#x4E0B;&#x9996;&#x5148;&#x53D1;&#x751F;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x3002;
<code>(//node)[1]</code> &#x9009;&#x62E9;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;&#x7136;&#x540E;&#x53EA;&#x83B7;&#x53D6;&#x5176;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>
<p>&#x4F8B;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; from scrapy import Selector&gt;&gt;&gt; sel = Selector(text=&quot;&quot;&quot;
....:     &lt;ul class=&quot;list&quot;&gt;
....:         &lt;li&gt;1&lt;/li&gt;
....:         &lt;li&gt;2&lt;/li&gt;
....:         &lt;li&gt;3&lt;/li&gt;
....:     &lt;/ul&gt;
....:     &lt;ul class=&quot;list&quot;&gt;
....:         &lt;li&gt;4&lt;/li&gt;
....:         &lt;li&gt;5&lt;/li&gt;
....:         &lt;li&gt;6&lt;/li&gt;
....:     &lt;/ul&gt;&quot;&quot;&quot;)
&gt;&gt;&gt; xp = lambda x: sel.xpath(x).extract()
</code></pre><p>&#x65E0;&#x8BBA;&#x5B83;&#x662F;&#x5426;&#x662F;&#x5B83;&#x7684;&#x7236;&#x7EA7;&#xFF0C;&#x5B83;&#x90FD;&#x4F1A;&#x83B7;&#x5F97;&#x6240;&#x6709;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;<code>&lt;li&gt;</code>&#x5143;&#x7D20;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; xp(&quot;//li[1]&quot;)
[u&apos;&lt;li&gt;1&lt;/li&gt;&apos;, u&apos;&lt;li&gt;4&lt;/li&gt;&apos;]
</code></pre><p>&#x8FD9;&#x5C31;&#x5F97;&#x5230;&#x4E86;&#x6574;&#x4E2A;&#x6587;&#x6863;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;<code>&lt;li&gt;</code>&#x5143;&#x7D20;</p>
<pre><code>&gt;&gt;&gt; xp(&quot;(//li)[1]&quot;)
[u&apos;&lt;li&gt;1&lt;/li&gt;&apos;]
</code></pre><p>&#x8FD9;&#x5C06;&#x83B7;&#x5F97;&#x6240;&#x6709;&#x7236;&#x9879;<ul>&#x4E0B;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;<code>&lt;li&gt;</code>&#x5143;&#x7D20;&#xFF1A;</ul></p>
<pre><code>&gt;&gt;&gt; xp(&quot;//ul/li[1]&quot;)
[u&apos;&lt;li&gt;1&lt;/li&gt;&apos;, u&apos;&lt;li&gt;4&lt;/li&gt;&apos;]
</code></pre><p>&#x8FD9;&#x5C06;&#x83B7;&#x5F97;&#x6574;&#x4E2A;&#x6587;&#x6863;&#x4E2D;&#x7236;&#x9879;<code>&lt;ul&gt;</code>&#x4E0B;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;<code>&lt;li&gt;</code>&#x5143;&#x7D20;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; xp(&quot;(//ul/li)[1]&quot;)
[u&apos;&lt;li&gt;1&lt;/li&gt;&apos;]
</code></pre><h3 id="&#x6309;&#x7C7B;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x8BF7;&#x8003;&#x8651;&#x4F7F;&#x7528;css">&#x6309;&#x7C7B;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x8BF7;&#x8003;&#x8651;&#x4F7F;&#x7528;CSS</h3>
<p>&#x7531;&#x4E8E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x591A;&#x4E2A;CSS&#x7C7B;&#xFF0C;&#x56E0;&#x6B64;&#x6309;&#x7C7B;&#x9009;&#x62E9;&#x5143;&#x7D20;&#x7684;XPath&#x65B9;&#x6CD5;&#x76F8;&#x5F53;&#x5197;&#x957F;&#xFF1A;</p>
<pre><code>*[contains(concat(&apos; &apos;, normalize-space(@class), &apos; &apos;), &apos; someclass &apos;)]
</code></pre><p>&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;<code>@class=&apos;someclass&apos;</code>&#x4F60;&#x6700;&#x7EC8;&#x53EF;&#x80FD;&#x4F1A;&#x4E22;&#x5931;&#x5177;&#x6709;&#x5176;&#x4ED6;&#x7C7B;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x53EA;&#x662F;&#x7528;<code>contains(@class, &apos;someclass&apos;)someclass</code>&#x5F25;&#x8865;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x5F97;&#x5230;&#x66F4;&#x591A;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x4ED6;&#x4EEC;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x540D;&#x5219;&#x5171;&#x4EAB;&#x5B57;&#x7B26;&#x4E32;someclass.</p>
<p>&#x4E8B;&#x5B9E;&#x8BC1;&#x660E;&#xFF0C;Scrapy&#x9009;&#x62E9;&#x5668;&#x5141;&#x8BB8;&#x60A8;&#x94FE;&#x63A5;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;CSS&#x6309;&#x7C7B;&#x9009;&#x62E9;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x9700;&#x8981;&#x65F6;&#x5207;&#x6362;&#x5230;XPath&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; from scrapy import Selector
&gt;&gt;&gt; sel = Selector(text=&apos;&lt;div class=&quot;hero shout&quot;&gt;&lt;time datetime=&quot;2014-07-23 19:00&quot;&gt;Special date&lt;/time&gt;&lt;/div&gt;&apos;)
&gt;&gt;&gt; sel.css(&apos;.shout&apos;).xpath(&apos;./time/@datetime&apos;).extract()
[u&apos;2014-07-23 19:00&apos;]
</code></pre><p>&#x8FD9;&#x6BD4;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x663E;&#x793A;&#x7684;&#x8BE6;&#x7EC6;XPath&#x6280;&#x5DE7;&#x66F4;&#x6E05;&#x6670;&#x3002;&#x53EA;&#x8981;&#x8BB0;&#x4F4F; . &#x8981;&#x5728;XPath&#x8868;&#x8FBE;&#x5F0F;&#x540E;&#x4F7F;&#x7528;&#x3002;</p>
<h2 id="&#x5185;&#x7F6E;&#x9009;&#x62E9;&#x5668;&#x53C2;&#x8003;">&#x5185;&#x7F6E;&#x9009;&#x62E9;&#x5668;&#x53C2;&#x8003;</h2>
<h3 id="&#x9009;&#x62E9;&#x5668;&#x5BF9;&#x8C61;">&#x9009;&#x62E9;&#x5668;&#x5BF9;&#x8C61;</h3>
<blockquote>
<p>classscrapy.selector.Selector&#xFF08;response = None&#xFF0C;text = None&#xFF0C;type = None &#xFF09;</p>
</blockquote>
<p><code>Selector</code>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x662F;&#x4E00;&#x4E2A;&#x5305;&#x88C5;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x9009;&#x62E9;&#x5176;&#x5185;&#x5BB9;&#x7684;&#x67D0;&#x4E9B;&#x90E8;&#x5206;&#x3002;</p>
<p><code>response</code>&#x662F;&#x5C06;&#x7528;&#x4E8E;&#x9009;&#x62E9;&#x548C;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x7684;&#x4E00;&#x4E2A;<code>HtmlResponse</code>&#x5BF9;&#x8C61;&#x6216;&#x4E00;&#x4E2A; <code>XmlResponse</code>&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x5F53;<code>response</code>&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#xFF0C;<code>text</code>&#x662F;&#x4E00;&#x4E2A;unicode&#x5B57;&#x7B26;&#x4E32;&#x6216;utf-8&#x7F16;&#x7801;&#x6587;&#x672C;&#x3002;&#x4E00;&#x8D77;&#x4F7F;&#x7528;<code>tex</code>t&#x548C;<code>response</code>&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x672A;&#x5B9A;&#x4E49;&#x7684;&#x884C;&#x4E3A;&#x3002;</p>
<p><code>type</code>&#x5B9A;&#x4E49;&#x9009;&#x62E9;&#x5668;&#x7C7B;&#x578B;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x662F;<code>&quot;html&quot;</code>&#xFF0C;<code>&quot;xml&quot;</code>&#x6216;<code>None</code>&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#x3002;</p>
<p>&#x5982;&#x679C;<code>type</code>&#x662F;<code>None</code>&#xFF0C;&#x9009;&#x62E9;&#x5668;&#x5C06;&#x6839;&#x636E;<code>response</code>&#x7C7B;&#x578B;&#x81EA;&#x52A8;&#x9009;&#x62E9;&#x6700;&#x4F73;&#x7C7B;&#x578B;&#xFF08;&#x8BF7;&#x53C2;&#x89C1;&#x4E0B;&#x6587;&#xFF09;&#xFF0C;&#x6216;&#x8005;&#x9ED8;&#x8BA4;&#x4E3A;<code>&quot;html&quot;</code>&#x4E0E;<code>text</code>&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5982;&#x679C;<code>type</code> &#x662F; <code>None</code>&#x5E76;&#x4E14;&#x4F20;&#x9012;&#x4E86;&#x4E00;&#x4E2A;<code>response</code>&#xFF0C;&#x5219;&#x4ECE;&#x54CD;&#x5E94;&#x7C7B;&#x578B;&#x63A8;&#x65AD;&#x9009;&#x62E9;&#x5668;&#x7C7B;&#x578B;&#x5982;&#x4E0B;:</p>
<ul>
<li>&quot;html&quot;&#x4E3A;<code>HtmlResponse</code>&#x7C7B;&#x578B;</li>
<li>&quot;xml&quot;&#x4E3A;<code>XmlResponse</code>&#x7C7B;&#x578B;</li>
<li>&quot;html&quot; &#x4E3A;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;
&#x5426;&#x5219;&#xFF0C;&#x5982;&#x679C;<code>type</code>&#x88AB;&#x8BBE;&#x7F6E;&#xFF0C;&#x9009;&#x62E9;&#x5668;&#x7C7B;&#x578B;&#x5C06;&#x88AB;&#x5F3A;&#x5236;&#x5B9A;&#x4E49;&#x5E76;&#x4E14;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x68C0;&#x6D4B;&#x3002;<blockquote>
<p>xpath&#xFF08;query&#xFF09;</p>
</blockquote>
</li>
</ul>
<p>&#x67E5;&#x627E;&#x4E0E;xpath&#x5339;&#x914D;&#x7684;&#x8282;&#x70B9;<code>query</code>&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x4F5C;&#x4E3A;SelectorList&#x5B9E;&#x4F8B;&#x8FD4;&#x56DE;&#xFF0C; &#x5E76;&#x5C06;&#x6240;&#x6709;&#x5143;&#x7D20;&#x5C55;&#x5E73;&#x3002;&#x5217;&#x8868;&#x5143;&#x7D20;&#x4E5F;&#x5B9E;&#x73B0;&#x4E86;Selector&#x63A5;&#x53E3;&#x3002;</p>
<p><code>query</code> &#x662F;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x8981;&#x5E94;&#x7528;&#x7684;XPATH&#x67E5;&#x8BE2;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;</p>
<p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x88AB;&#x79F0;&#x4E3A; response.xpath()</p>
</blockquote>
<p><strong>css&#xFF08;query&#xFF09;</strong></p>
<p>&#x5E94;&#x7528;&#x7ED9;&#x5B9A;&#x7684;CSS&#x9009;&#x62E9;&#x5668;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>SelectorList</code>&#x5B9E;&#x4F8B;&#x3002;</p>
<p><code>query</code> &#x662F;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x8981;&#x5E94;&#x7528;&#x7684;CSS&#x9009;&#x62E9;&#x5668;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;
&#x5728;&#x540E;&#x53F0;&#xFF0C;&#x4F7F;&#x7528;cssselect&#x5E93;&#x548C;run .xpath()&#x65B9;&#x6CD5;&#x5C06;CSS&#x67E5;&#x8BE2;&#x8F6C;&#x6362;&#x4E3A;XPath&#x67E5;&#x8BE2; &#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;</p>
<p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x8D77;&#x89C1;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x79F0;&#x4E3A; response.css()</p>
</blockquote>
<p><strong>extract&#xFF08;&#xFF09;</strong></p>
<p>&#x5E8F;&#x5217;&#x5316;&#x5E76;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x7684;&#x8282;&#x70B9;&#x4F5C;&#x4E3A;unicode&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#x3002;&#x767E;&#x5206;&#x6BD4;&#x7F16;&#x7801;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x6CA1;&#x6709;&#x5F15;&#x7528;&#x7684;&#x3002;</p>
<p><strong>re&#xFF08;regex&#xFF09;</strong></p>
<p>&#x5E94;&#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5E76;&#x8FD4;&#x56DE;&#x5305;&#x542B;&#x5339;&#x914D;&#x7684;unicode&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#x3002;</p>
<p><code>regex</code> &#x53EF;&#x4EE5;&#x662F;&#x5DF2;&#x7F16;&#x8BD1;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5C06;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7F16;&#x8BD1;&#x4E3A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x5B57;&#x7B26;&#x4E32;<code>re.compile(regex)</code></p>
<blockquote>
<p>&#x6CE8;&#x610F;</p>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;re()&#x5E76;&#x4E14;re_first()&#x90FD;&#x89E3;&#x7801;HTML&#x5B9E;&#x4F53;&#xFF08;&#x9664;&#x4E86;&lt;&#x548C;&amp;&#xFF09;&#x3002;</p>
</blockquote>
<p><strong>register_namespace&#xFF08;prefix&#xFF0C;uri &#xFF09;</strong></p>
<p>&#x6CE8;&#x518C;&#x5728;&#x6B64;&#x4F7F;&#x7528;&#x7684;&#x7ED9;&#x5B9A;&#x540D;&#x79F0;&#x7A7A;&#x95F4;<code>Selector</code>&#x3002;&#x5982;&#x679C;&#x4E0D;&#x6CE8;&#x518C;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF0C;&#x5219;&#x65E0;&#x6CD5;&#x4ECE;&#x975E;&#x6807;&#x51C6;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x4E2D;&#x9009;&#x62E9;&#x6216;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x3002;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p><strong>remove_namespaces&#xFF08;&#xFF09;</strong></p>
<p>&#x5220;&#x9664;&#x6240;&#x6709;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF0C;&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x4E0D;&#x542B;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x7684;xpaths&#x6765;&#x904D;&#x5386;&#x6587;&#x6863;&#x3002;&#x89C1;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p><strong><strong>nonzero</strong>&#xFF08;&#xFF09;</strong></p>
<p>&#x8FD4;&#x56DE;<code>True</code>&#x662F;&#x5426;&#x6709;&#x4EFB;&#x4F55;&#x9009;&#x5B9A;&#x7684;&#x771F;&#x5B9E;&#x5185;&#x5BB9;&#x6216;<code>False</code> &#x5176;&#x4ED6;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;a&#x7684;&#x5E03;&#x5C14;&#x503C;Selector&#x7531;&#x5B83;&#x9009;&#x62E9;&#x7684;&#x5185;&#x5BB9;&#x7ED9;&#x51FA;&#x3002;</p>
<h3 id="selectorlist&#x5BF9;&#x8C61;">SelectorList&#x5BF9;&#x8C61;</h3>
<blockquote>
<p>Class scrapy.selector.SelectorList</p>
</blockquote>
<p>&#x8FD9;&#x4E2A;<code>SelectorList</code>&#x7C7B;&#x662F;&#x5185;&#x5EFA;<code>list</code> &#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<blockquote>
<p>xpath&#xFF08;query&#xFF09;</p>
</blockquote>
<p>&#x8C03;&#x7528;<code>.xpath()</code>&#x6B64;&#x5217;&#x8868;&#x4E2D;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#x5E76;&#x5C06;&#x5176;&#x7ED3;&#x679C;&#x5C55;&#x5E73;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;<code>SelectorList</code>&#x3002;</p>
<p><code>query</code> &#x4E0E;<code>Selector.xpath()</code>&#x53C2;&#x6570;&#x662F;&#x4E00;&#x6837;&#x7684; <code>Selector.xpath()</code></p>
<blockquote>
<p>css&#xFF08;query&#xFF09;</p>
</blockquote>
<p>&#x8C03;&#x7528;<code>.css()</code>&#x6B64;&#x5217;&#x8868;&#x4E2D;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#x5E76;&#x5C06;&#x5176;&#x7ED3;&#x679C;&#x5C55;&#x5E73;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;<code>SelectorList</code>&#x3002;</p>
<p><code>query</code> &#x4E0E;&#x5728;<code>Selector.css()</code>&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x6837;&#x7684;</p>
<blockquote>
<p>extract&#xFF08;&#xFF09;</p>
</blockquote>
<p>&#x8C03;&#x7528;<code>.extract()</code>&#x6B64;&#x5217;&#x8868;&#x4E2D;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#x5E76;&#x5C06;&#x5176;&#x7ED3;&#x679C;&#x5C55;&#x5E73;&#xFF0C;&#x4F5C;&#x4E3A;unicode&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#x3002;</p>
<blockquote>
<p>re&#xFF08;&#xFF09;</p>
</blockquote>
<p>&#x8C03;&#x7528;<code>.re()</code>&#x6B64;&#x5217;&#x8868;&#x4E2D;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#x5E76;&#x5C06;&#x5176;&#x7ED3;&#x679C;&#x5C55;&#x5E73;&#xFF0C;&#x4F5C;&#x4E3A;unicode&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#x3002;</p>
<h3 id="html&#x54CD;&#x5E94;&#x7684;&#x9009;&#x62E9;&#x5668;&#x793A;&#x4F8B;">HTML&#x54CD;&#x5E94;&#x7684;&#x9009;&#x62E9;&#x5668;&#x793A;&#x4F8B;</h3>
<p>&#x8FD9;&#x91CC;&#x6709;&#x51E0;&#x4E2A;<code>Selector</code>&#x4F8B;&#x5B50;&#x6765;&#x8BF4;&#x660E;&#x51E0;&#x4E2A;&#x6982;&#x5FF5;&#x3002;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x5047;&#x8BBE;&#x5DF2;&#x7ECF;&#x6709;&#x4E00;&#x4E2A;&#x6709;&#x7740;<code>HtmlResponse</code>&#x5BF9;&#x8C61;&#x7684;<code>Selector</code>&#x5B9E;&#x4F8B;&#xFF1A;</p>
<pre><code>sel = Selector(html_response)
</code></pre><p>1.&#x4ECE;HTML&#x54CD;&#x5E94;&#x4E3B;&#x4F53;&#x4E2D;&#x9009;&#x62E9;&#x6240;&#x6709;<code>&lt;h1&gt;</code>&#x5143;&#x7D20;&#xFF0C;&#x8FD4;&#x56DE;<code>Selector</code>&#x5BF9;&#x8C61;&#x5217;&#x8868; &#xFF08;&#x5373;<code>SelectorList</code>&#x5BF9;&#x8C61;&#xFF09;&#xFF1A;</p>
<pre><code>sel.xpath(&quot;//h1&quot;)
</code></pre><p>2.&#x4ECE;HTML&#x54CD;&#x5E94;&#x4E3B;&#x4F53;&#x4E2D;&#x63D0;&#x53D6;&#x6240;&#x6709;<code>&lt;h1&gt;</code>&#x5143;&#x7D20;&#x7684;&#x6587;&#x672C;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;unicode&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#xFF1A;</p>
<pre><code>sel.xpath(&quot;//h1&quot;).extract()         # this includes the h1 tag
sel.xpath(&quot;//h1/text()&quot;).extract()  # this excludes the h1 tag
</code></pre><p>3.&#x904D;&#x5386;&#x6240;&#x6709;<code>&lt;p&gt;</code>&#x6807;&#x7B7E;&#x5E76;&#x6253;&#x5370;&#x5B83;&#x4EEC;&#x7684;&#x7C7B;&#x5C5E;&#x6027;&#xFF1A;</p>
<pre><code>for node in sel.xpath(&quot;//p&quot;):
    print node.xpath(&quot;@class&quot;).extract()
</code></pre><h3 id="xml&#x54CD;&#x5E94;&#x7684;&#x9009;&#x62E9;&#x5668;&#x793A;&#x4F8B;">XML&#x54CD;&#x5E94;&#x7684;&#x9009;&#x62E9;&#x5668;&#x793A;&#x4F8B;</h3>
<p>&#x8FD9;&#x91CC;&#x6709;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x8BF4;&#x660E;&#x51E0;&#x4E2A;&#x6982;&#x5FF5;&#x3002;&#x5728;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x5047;&#x8BBE;&#x5DF2;&#x7ECF;<code>Selector</code>&#x6709;&#x4E00;&#x4E2A;<code>XmlResponse</code>&#x50CF;&#x8FD9;&#x6837;&#x7684;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x5316;&#x4E86; &#xFF1A;</p>
<pre><code>sel = Selector(xml_response)
</code></pre><p>1.&#x4ECE;XML&#x54CD;&#x5E94;&#x4E3B;&#x4F53;&#x4E2D;&#x9009;&#x62E9;&#x6240;&#x6709;<code>&lt;product&gt;</code>&#x5143;&#x7D20;&#xFF0C;&#x8FD4;&#x56DE;<code>Selector</code>&#x5BF9;&#x8C61;&#x5217;&#x8868;&#xFF08;&#x5373;<code>SelectorList</code>&#x5BF9;&#x8C61;&#xFF09;&#xFF1A;</p>
<pre><code>sel.xpath(&quot;//product&quot;)
</code></pre><p>2.&#x4ECE;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x7684;<code>Google Base XML Feed</code>&#x4E2D;&#x63D0;&#x53D6;&#x6240;&#x6709;&#x503C;&#xFF1A;</p>
<pre><code>sel.register_namespace(&quot;g&quot;, &quot;http://base.google.com/ns/1.0&quot;)
sel.xpath(&quot;//g:price&quot;).extract()
</code></pre><h3 id="&#x5220;&#x9664;&#x547D;&#x540D;&#x7A7A;&#x95F4;">&#x5220;&#x9664;&#x547D;&#x540D;&#x7A7A;&#x95F4;</h3>
<p>&#x5728;&#x5904;&#x7406;&#x722C;&#x866B;&#x9879;&#x76EE;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x5B8C;&#x5168;&#x6446;&#x8131;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x5E76;&#x4EC5;&#x4F7F;&#x7528;&#x5143;&#x7D20;&#x540D;&#x79F0;&#x6765;&#x7F16;&#x5199;&#x66F4;&#x7B80;&#x5355;/&#x65B9;&#x4FBF;&#x7684;XPath&#x662F;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x7684;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>Selector.remove_namespaces()</code>&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x7528;GitHub&#x535A;&#x5BA2;atom feed&#x6765;&#x8BF4;&#x660E;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x522E;&#x53D6;&#x7684;url&#x6253;&#x5F00;shell&#xFF1A;</p>
<pre><code>$ scrapy shell https://github.com/blog.atom
</code></pre><p>&#x4E00;&#x65E6;&#x8FDB;&#x5165;shell&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x9009;&#x62E9;&#x6240;&#x6709;<link>&#x5BF9;&#x8C61;&#x5E76;&#x67E5;&#x770B;&#x5B83;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF08;&#x56E0;&#x4E3A;Atom XML&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x6B63;&#x5728;&#x6DF7;&#x6DC6;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#xFF09;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.xpath(&quot;//link&quot;)
[]
</code></pre><p>&#x4F46;&#x662F;&#x4E00;&#x65E6;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;<code>Selector.remove_namespaces()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x8282;&#x70B9;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x540D;&#x5B57;&#x6765;&#x8BBF;&#x95EE;&#xFF1A;</p>
<pre><code>&gt;&gt;&gt; response.selector.remove_namespaces()
&gt;&gt;&gt; response.xpath(&quot;//link&quot;)
[&lt;Selector xpath=&apos;//link&apos; data=u&apos;&lt;link xmlns=&quot;http://www.w3.org/2005/Atom&apos;&gt;, &lt;Selector xpath=&apos;//link&apos; data=u&apos;&lt;link xmlns=&quot;http://www.w3.org/2005/Atom&apos;&gt;, 
...
</code></pre><p>&#x5982;&#x679C;&#x60A8;&#x60F3;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x5220;&#x9664;&#x8FC7;&#x7A0B;&#x5E76;&#x4E0D;&#x603B;&#x662F;&#x88AB;&#x9ED8;&#x8BA4;&#x8C03;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x624B;&#x52A8;&#x8C03;&#x7528;&#x5B83;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x4E24;&#x4E2A;&#x539F;&#x56E0;&#xFF0C;&#x6309;&#x7167;&#x76F8;&#x5173;&#x6027;&#x987A;&#x5E8F;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x539F;&#x56E0;&#x662F;&#xFF1A;</p>
<p>1.&#x5220;&#x9664;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x9700;&#x8981;&#x8FED;&#x4EE3;&#x548C;&#x4FEE;&#x6539;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;&#x8FD9;&#x5BF9;&#x4E8E;Scrapy&#x641C;&#x7D22;&#x7684;&#x6240;&#x6709;&#x6587;&#x6863;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x6765;&#x8BF4;&#x662F;&#x76F8;&#x5F53;&#x6602;&#x8D35;&#x7684;&#x64CD;&#x4F5C;</p>
<p>2.&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF0C;&#x4EE5;&#x9632;&#x67D0;&#x4E9B;&#x5143;&#x7D20;&#x540D;&#x79F0;&#x5728;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x4E4B;&#x95F4;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x3002;&#x8FD9;&#x4E9B;&#x6848;&#x4F8B;&#x867D;&#x7136;&#x975E;&#x5E38;&#x7F55;&#x89C1;&#x3002;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Spiders.html" class="navigation navigation-prev " aria-label="Previous page: 蜘蛛">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Items.html" class="navigation navigation-next " aria-label="Next page: 项目">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"选择器","level":"1.3.3","depth":2,"next":{"title":"项目","level":"1.3.4","depth":2,"path":"2.BASIC CONCEPTS/Items.md","ref":"2.BASIC CONCEPTS/Items.md","articles":[]},"previous":{"title":"蜘蛛","level":"1.3.2","depth":2,"path":"2.BASIC CONCEPTS/Spiders.md","ref":"2.BASIC CONCEPTS/Spiders.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"2.BASIC CONCEPTS/Selectors.md","mtime":"2018-04-25T16:19:44.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-05-08T09:17:40.626Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

